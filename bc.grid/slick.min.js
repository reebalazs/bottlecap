/* 
 * jquery.event.drag - v 2.0.0 
 * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com
 * Open Source MIT License - http://threedubmedia.com/code/license
 */
(function(d){d.fn.drag=function(c,f,i){var h=typeof c=="string"?c:"",g=d.isFunction(c)?c:d.isFunction(f)?f:null;if(h.indexOf("drag")!==0){h="drag"+h}i=(c==g?f:i)||{};return g?this.bind(h,i,g):this.trigger(h)};var a=d.event,b=a.special,e=b.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:false,drop:true,click:false},datakey:"dragdata",livekey:"livedrag",add:function(c){var f=d.data(this,e.datakey),g=c.data||{};f.related+=1;if(!f.live&&c.selector){f.live=true;a.add(this,"draginit."+e.livekey,e.delegate)}d.each(e.defaults,function(h){if(g[h]!==undefined){f[h]=g[h]}})},remove:function(){d.data(this,e.datakey).related-=1},setup:function(){if(!d.data(this,e.datakey)){var c=d.extend({related:0},e.defaults);d.data(this,e.datakey,c);a.add(this,"mousedown",e.init,c);this.attachEvent&&this.attachEvent("ondragstart",e.dontstart)}},teardown:function(){if(!d.data(this,e.datakey).related){d.removeData(this,e.datakey);a.remove(this,"mousedown",e.init);a.remove(this,"draginit",e.delegate);e.textselect(true);this.detachEvent&&this.detachEvent("ondragstart",e.dontstart)}},init:function(c){var f=c.data,g;if(!(f.which>0&&c.which!=f.which)){if(!d(c.target).is(f.not)){if(!(f.handle&&!d(c.target).closest(f.handle,c.currentTarget).length)){f.propagates=1;f.interactions=[e.interaction(this,f)];f.target=c.target;f.pageX=c.pageX;f.pageY=c.pageY;f.dragging=null;g=e.hijack(c,"draginit",f);if(f.propagates){if((g=e.flatten(g))&&g.length){f.interactions=[];d.each(g,function(){f.interactions.push(e.interaction(this,f))})}f.propagates=f.interactions.length;f.drop!==false&&b.drop&&b.drop.handler(c,f);e.textselect(false);a.add(document,"mousemove mouseup",e.handler,f);return false}}}}},interaction:function(c,f){return{drag:c,callback:new e.callback,droppable:[],offset:d(c)[f.relative?"position":"offset"]()||{top:0,left:0}}},handler:function(c){var f=c.data;switch(c.type){case !f.dragging&&"mousemove":if(Math.pow(c.pageX-f.pageX,2)+Math.pow(c.pageY-f.pageY,2)<Math.pow(f.distance,2)){break}c.target=f.target;e.hijack(c,"dragstart",f);if(f.propagates){f.dragging=true}case"mousemove":if(f.dragging){e.hijack(c,"drag",f);if(f.propagates){f.drop!==false&&b.drop&&b.drop.handler(c,f);break}c.type="mouseup"}case"mouseup":a.remove(document,"mousemove mouseup",e.handler);if(f.dragging){f.drop!==false&&b.drop&&b.drop.handler(c,f);e.hijack(c,"dragend",f)}e.textselect(true);if(f.click===false&&f.dragging){jQuery.event.triggered=true;setTimeout(function(){jQuery.event.triggered=false},20);f.dragging=false}break}},delegate:function(c){var f=[],h,g=d.data(this,"events")||{};d.each(g.live||[],function(i,l){if(l.preType.indexOf("drag")===0){if(h=d(c.target).closest(l.selector,c.currentTarget)[0]){a.add(h,l.origType+"."+e.livekey,l.origHandler,l.data);d.inArray(h,f)<0&&f.push(h)}}});if(!f.length){return false}return d(f).bind("dragend."+e.livekey,function(){a.remove(this,"."+e.livekey)})},hijack:function(u,v,t,s,p){if(t){var q={event:u.originalEvent,type:u.type},f=v.indexOf("drop")?"drag":"drop",i,c=s||0,r,h;s=!isNaN(s)?s:t.interactions.length;u.type=v;u.originalEvent=null;t.results=[];do{if(r=t.interactions[c]){if(!(v!=="dragend"&&r.cancelled)){h=e.properties(u,t,r);r.results=[];d(p||r[f]||t.droppable).each(function(g,j){i=(h.target=j)?a.handle.call(j,u,h):null;if(i===false){if(f=="drag"){r.cancelled=true;t.propagates-=1}if(v=="drop"){r[f][g]=null}}else{if(v=="dropinit"){r.droppable.push(e.element(i)||j)}}if(v=="dragstart"){r.proxy=d(e.element(i)||r.drag)[0]}r.results.push(i);delete u.result;if(v!=="dropinit"){return i}});t.results[c]=e.flatten(r.results);if(v=="dropinit"){r.droppable=e.flatten(r.droppable)}v=="dragstart"&&!r.cancelled&&h.update()}}}while(++c<s);u.type=q.type;u.originalEvent=q.event;return e.flatten(t.results)}},properties:function(c,f,h){var g=h.callback;g.drag=h.drag;g.proxy=h.proxy||h.drag;g.startX=f.pageX;g.startY=f.pageY;g.deltaX=c.pageX-f.pageX;g.deltaY=c.pageY-f.pageY;g.originalX=h.offset.left;g.originalY=h.offset.top;g.offsetX=c.pageX-(f.pageX-g.originalX);g.offsetY=c.pageY-(f.pageY-g.originalY);g.drop=e.flatten((h.drop||[]).slice());g.available=e.flatten((h.droppable||[]).slice());return g},element:function(c){if(c&&(c.jquery||c.nodeType==1)){return c}},flatten:function(c){return d.map(c,function(f){return f&&f.jquery?d.makeArray(f):f&&f.length?e.flatten(f):f})},textselect:function(c){d(document)[c?"unbind":"bind"]("selectstart",e.dontstart).attr("unselectable",c?"off":"on").css("MozUserSelect",c?"":"none")},dontstart:function(){return false},callback:function(){}};e.callback.prototype={update:function(){b.drop&&this.available.length&&d.each(this.available,function(c){b.drop.locate(this,c)})}};b.draginit=b.dragstart=b.dragend=e})(jQuery);(function(g){g.extend(true,window,{Slick:{Event:b,EventData:e,Range:h,NonDataRow:d,Group:c,GroupTotals:a,EditorLock:f,GlobalEditorLock:new f()}});function e(){var i=false;var j=false;this.stopPropagation=function(){i=true};this.isPropagationStopped=function(){return i};this.stopImmediatePropagation=function(){j=true};this.isImmediatePropagationStopped=function(){return j}}function b(){var i=[];this.subscribe=function(j){i.push(j)};this.unsubscribe=function(k){for(var j=i.length-1;j>=0;j--){if(i[j]===k){i.splice(j,1)}}};this.notify=function(j,n,m){n=n||new e();m=m||this;var l;for(var k=0;k<i.length&&!(n.isPropagationStopped()||n.isImmediatePropagationStopped());k++){l=i[k].call(m,n,j)}return l}}function h(j,i,k,l){if(k===undefined&&l===undefined){k=j;l=i}this.fromRow=Math.min(j,k);this.fromCell=Math.min(i,l);this.toRow=Math.max(j,k);this.toCell=Math.max(i,l);this.isSingleRow=function(){return this.fromRow==this.toRow};this.isSingleCell=function(){return this.fromRow==this.toRow&&this.fromCell==this.toCell};this.contains=function(n,m){return n>=this.fromRow&&n<=this.toRow&&m>=this.fromCell&&m<=this.toCell};this.toString=function(){if(this.isSingleCell()){return"("+this.fromRow+":"+this.fromCell+")"}else{return"("+this.fromRow+":"+this.fromCell+" - "+this.toRow+":"+this.toCell+")"}}}function d(){this.__nonDataRow=true}function c(){this.__group=true;this.__updated=false;this.count=0;this.value=null;this.title=null;this.collapsed=false;this.totals=null}c.prototype=new d();c.prototype.equals=function(i){return this.value===i.value&&this.count===i.count&&this.collapsed===i.collapsed};function a(){this.__groupTotals=true;this.group=null}a.prototype=new d();function f(){var i=null;this.isActive=function(k){return(k?i===k:i!==null)};this.activate=function(k){if(k===i){return}if(i!==null){throw"SlickGrid.EditorLock.activate: an editController is still active, can't activate another editController"}if(!k.commitCurrentEdit){throw"SlickGrid.EditorLock.activate: editController must implement .commitCurrentEdit()"}if(!k.cancelCurrentEdit){throw"SlickGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()"}i=k};this.deactivate=function(k){if(i!==k){throw"SlickGrid.EditorLock.deactivate: specified editController is not the currently active one"}i=null};this.commitCurrentEdit=function(){return(i?i.commitCurrentEdit():true)};this.cancelCurrentEdit=function j(){return(i?i.cancelCurrentEdit():true)}}})(jQuery);(function(a){var b={SelectorCellFormatter:function(g,d,f,e,c){return(!c?"":g)},PercentCompleteCellFormatter:function(g,d,f,e,c){if(f==null||f===""){return"-"}else{if(f<50){return"<span style='color:red;font-weight:bold;'>"+f+"%</span>"}else{return"<span style='color:green'>"+f+"%</span>"}}},GraphicalPercentCompleteCellFormatter:function(h,d,g,f,c){if(g==null||g===""){return""}var e;if(g<30){e="red"}else{if(g<70){e="silver"}else{e="green"}}return"<span class='percent-complete-bar' style='background:"+e+";width:"+g+"%'></span>"},YesNoCellFormatter:function(g,d,f,e,c){return f?"Yes":"No"},BoolCellFormatter:function(g,d,f,e,c){return f?"<img src='../images/tick.png'>":""},TaskNameFormatter:function(h,d,g,e,c){var f="<span style='display:inline-block;height:1px;width:"+(2+15*c.indent)+"px'></span>";return f+" <img src='../images/expand.gif'>&nbsp;"+g},ResourcesFormatter:function(h,d,f,e,c){var g=c.resources;if(!g||g.length==0){return""}if(e.width<50){return(g.length>1?"<center><img src='../images/user_identity_plus.gif' ":"<center><img src='../images/user_identity.gif' ")+" title='"+g.join(", ")+"'></center>"}else{return g.join(", ")}},StarFormatter:function(g,d,f,e,c){return(f)?"<img src='../images/bullet_star.png' align='absmiddle'>":""},TextCellEditor:function(d){var f;var c;var e=this;this.init=function(){f=a("<INPUT type=text class='editor-text' />").appendTo(d.container).bind("keydown.nav",function(g){if(g.keyCode===a.ui.keyCode.LEFT||g.keyCode===a.ui.keyCode.RIGHT){g.stopImmediatePropagation()}}).focus().select()};this.destroy=function(){f.remove()};this.focus=function(){f.focus()};this.getValue=function(){return f.val()};this.setValue=function(g){f.val(g)};this.loadValue=function(g){c=g[d.column.field]||"";f.val(c);f[0].defaultValue=c;f.select()};this.serializeValue=function(){return f.val()};this.applyValue=function(g,h){g[d.column.field]=h};this.isValueChanged=function(){return(!(f.val()==""&&c==null))&&(f.val()!=c)};this.validate=function(){if(d.column.validator){var g=d.column.validator(f.val());if(!g.valid){return g}}return{valid:true,msg:null}};this.init()},IntegerCellEditor:function(d){var f;var c;var e=this;this.init=function(){f=a("<INPUT type=text class='editor-text' />");f.bind("keydown.nav",function(g){if(g.keyCode===a.ui.keyCode.LEFT||g.keyCode===a.ui.keyCode.RIGHT){g.stopImmediatePropagation()}});f.appendTo(d.container);f.focus().select()};this.destroy=function(){f.remove()};this.focus=function(){f.focus()};this.loadValue=function(g){c=g[d.column.field];f.val(c);f[0].defaultValue=c;f.select()};this.serializeValue=function(){return parseInt(f.val(),10)||0};this.applyValue=function(g,h){g[d.column.field]=h};this.isValueChanged=function(){return(!(f.val()==""&&c==null))&&(f.val()!=c)};this.validate=function(){if(isNaN(f.val())){return{valid:false,msg:"Please enter a valid integer"}}return{valid:true,msg:null}};this.init()},DateCellEditor:function(d){var g;var c;var e=this;var f=false;this.init=function(){g=a("<INPUT type=text class='editor-text' />");g.appendTo(d.container);g.focus().select();g.datepicker({showOn:"button",buttonImageOnly:true,buttonImage:"../images/calendar.gif",beforeShow:function(){f=true},onClose:function(){f=false}});g.width(g.width()-18)};this.destroy=function(){a.datepicker.dpDiv.stop(true,true);g.datepicker("hide");g.datepicker("destroy");g.remove()};this.show=function(){if(f){a.datepicker.dpDiv.stop(true,true).show()}};this.hide=function(){if(f){a.datepicker.dpDiv.stop(true,true).hide()}};this.position=function(h){if(!f){return}a.datepicker.dpDiv.css("top",h.top+30).css("left",h.left)};this.focus=function(){g.focus()};this.loadValue=function(h){c=h[d.column.field];g.val(c);g[0].defaultValue=c;g.select()};this.serializeValue=function(){return g.val()};this.applyValue=function(h,i){h[d.column.field]=i};this.isValueChanged=function(){return(!(g.val()==""&&c==null))&&(g.val()!=c)};this.validate=function(){return{valid:true,msg:null}};this.init()},YesNoSelectCellEditor:function(e){var d;var c;var f=this;this.init=function(){d=a("<SELECT tabIndex='0' class='editor-yesno'><OPTION value='yes'>Yes</OPTION><OPTION value='no'>No</OPTION></SELECT>");d.appendTo(e.container);d.focus()};this.destroy=function(){d.remove()};this.focus=function(){d.focus()};this.loadValue=function(g){d.val((c=g[e.column.field])?"yes":"no");d.select()};this.serializeValue=function(){return(d.val()=="yes")};this.applyValue=function(g,h){g[e.column.field]=h};this.isValueChanged=function(){return(d.val()!=c)};this.validate=function(){return{valid:true,msg:null}};this.init()},YesNoCheckboxCellEditor:function(e){var d;var c;var f=this;this.init=function(){d=a("<INPUT type=checkbox value='true' class='editor-checkbox' hideFocus>");d.appendTo(e.container);d.focus()};this.destroy=function(){d.remove()};this.focus=function(){d.focus()};this.loadValue=function(g){c=g[e.column.field];if(c){d.attr("checked","checked")}else{d.removeAttr("checked")}};this.serializeValue=function(){return d.attr("checked")};this.applyValue=function(g,h){g[e.column.field]=h};this.isValueChanged=function(){return(d.attr("checked")!=c)};this.validate=function(){return{valid:true,msg:null}};this.init()},PercentCompleteCellEditor:function(d){var g,f;var c;var e=this;this.init=function(){g=a("<INPUT type=text class='editor-percentcomplete' />");g.width(a(d.container).innerWidth()-25);g.appendTo(d.container);f=a("<div class='editor-percentcomplete-picker' />").appendTo(d.container);f.append("<div class='editor-percentcomplete-helper'><div class='editor-percentcomplete-wrapper'><div class='editor-percentcomplete-slider' /><div class='editor-percentcomplete-buttons' /></div></div>");f.find(".editor-percentcomplete-buttons").append("<button val=0>Not started</button><br/><button val=50>In Progress</button><br/><button val=100>Complete</button>");g.focus().select();f.find(".editor-percentcomplete-slider").slider({orientation:"vertical",range:"min",value:c,slide:function(h,i){g.val(i.value)}});f.find(".editor-percentcomplete-buttons button").bind("click",function(h){g.val(a(this).attr("val"));f.find(".editor-percentcomplete-slider").slider("value",a(this).attr("val"))})};this.destroy=function(){g.remove();f.remove()};this.focus=function(){g.focus()};this.loadValue=function(h){g.val(c=h[d.column.field]);g.select()};this.serializeValue=function(){return parseInt(g.val(),10)||0};this.applyValue=function(h,i){h[d.column.field]=i};this.isValueChanged=function(){return(!(g.val()==""&&c==null))&&((parseInt(g.val(),10)||0)!=c)};this.validate=function(){if(isNaN(parseInt(g.val(),10))){return{valid:false,msg:"Please enter a valid positive number"}}return{valid:true,msg:null}};this.init()},StarCellEditor:function(e){var g;var d;var f=this;function c(h){if(h.type=="keydown"&&h.which!=32){return}if(g.css("opacity")=="1"){g.css("opacity",0.5)}else{g.css("opacity",1)}h.preventDefault();h.stopPropagation();return false}this.init=function(){g=a("<IMG src='../images/bullet_star.png' align=absmiddle tabIndex=0 title='Click or press Space to toggle' />").bind("click keydown",c).appendTo(e.container).focus()};this.destroy=function(){g.unbind("click keydown",c);g.remove()};this.focus=function(){g.focus()};this.loadValue=function(h){d=h[e.column.field];g.css("opacity",d?1:0.2)};this.serializeValue=function(){return(g.css("opacity")=="1")};this.applyValue=function(h,i){h[e.column.field]=i};this.isValueChanged=function(){return d!=(g.css("opacity")=="1")};this.validate=function(){return{valid:true,msg:null}};this.init()},LongTextCellEditor:function(d){var g,f;var c;var e=this;this.init=function(){var h=a("body");f=a("<DIV style='z-index:10000;position:absolute;background:white;padding:5px;border:3px solid gray; -moz-border-radius:10px; border-radius:10px;'/>").appendTo(h);g=a("<TEXTAREA hidefocus rows=5 style='backround:white;width:250px;height:80px;border:0;outline:0'>").appendTo(f);a("<DIV style='text-align:right'><BUTTON>Save</BUTTON><BUTTON>Cancel</BUTTON></DIV>").appendTo(f);f.find("button:first").bind("click",this.save);f.find("button:last").bind("click",this.cancel);g.bind("keydown",this.handleKeyDown);e.position(d.position);g.focus().select()};this.handleKeyDown=function(h){if(h.which==a.ui.keyCode.ENTER&&h.ctrlKey){e.save()}else{if(h.which==a.ui.keyCode.ESCAPE){h.preventDefault();e.cancel()}else{if(h.which==a.ui.keyCode.TAB&&h.shiftKey){h.preventDefault();grid.navigatePrev()}else{if(h.which==a.ui.keyCode.TAB){h.preventDefault();grid.navigateNext()}}}}};this.save=function(){d.commitChanges()};this.cancel=function(){g.val(c);d.cancelChanges()};this.hide=function(){f.hide()};this.show=function(){f.show()};this.position=function(h){f.css("top",h.top-5).css("left",h.left-5)};this.destroy=function(){f.remove()};this.focus=function(){g.focus()};this.loadValue=function(h){g.val(c=h[d.column.field]);g.select()};this.serializeValue=function(){return g.val()};this.applyValue=function(h,i){h[d.column.field]=i};this.isValueChanged=function(){return(!(g.val()==""&&c==null))&&(g.val()!=c)};this.validate=function(){return{valid:true,msg:null}};this.init()}};a.extend(window,b)})(jQuery);if(typeof jQuery==="undefined"){throw"SlickGrid requires jquery module to be loaded"}if(!jQuery.fn.drag){throw"SlickGrid requires jquery.event.drag module to be loaded"}if(typeof Slick==="undefined"){throw"slick.core.js not loaded"}(function($){$.extend(true,window,{Slick:{Grid:SlickGrid}});var scrollbarDimensions;function SlickGrid(container,data,columns,options){var defaults={headerHeight:25,rowHeight:25,defaultColumnWidth:80,enableAddRow:false,leaveSpaceForNewRows:false,editable:false,autoEdit:true,enableCellNavigation:true,enableCellRangeSelection:false,enableColumnReorder:true,asyncEditorLoading:false,asyncEditorLoadDelay:100,forceFitColumns:false,enableAsyncPostRender:false,asyncPostRenderDelay:60,autoHeight:false,editorLock:Slick.GlobalEditorLock,showHeaderRow:false,headerRowHeight:25,showTopPanel:false,topPanelHeight:25,syncColumnCellResize:false,formatterFactory:null,editorFactory:null,cellFlashingCssClass:"flashing",selectedCellCssClass:"selected",multiSelect:true},gridData;var columnDefaults={name:"",resizable:true,sortable:false,minWidth:30,rerenderOnResize:false,unselectable:false,groupTotalsFormatter:null};var maxSupportedCssHeight;var th;var h;var ph;var n;var cj;var page=0;var offset=0;var scrollDir=1;var $container;var uid="slickgrid_"+Math.round(1000000*Math.random());var self=this;var $headerScroller;var $headers;var $headerRow,$headerRowScroller;var $topPanelScroller;var $topPanel;var $viewport;var $canvas;var $style;var stylesheet;var viewportH,viewportW;var viewportHasHScroll;var headerColumnWidthDiff,headerColumnHeightDiff,cellWidthDiff,cellHeightDiff;var absoluteColumnMinWidth;var activeRow,activeCell;var activeCellNode=null;var currentEditor=null;var serializedEditorValue;var editController;var rowsCache={};var renderedRows=0;var numVisibleRows;var prevScrollTop=0;var scrollTop=0;var lastRenderedScrollTop=0;var prevScrollLeft=0;var avgRowRenderTime=10;var selectionModel;var selectedRows=[];var plugins=[];var cellCssClasses={};var columnsById={};var sortColumnId;var sortAsc=true;var h_editorLoader=null;var h_render=null;var h_postrender=null;var postProcessedRows={};var postProcessToRow=null;var postProcessFromRow=null;var counter_rows_rendered=0;var counter_rows_removed=0;function init(){$container=$(container);gridData=data;maxSupportedCssHeight=getMaxSupportedCssHeight();scrollbarDimensions=scrollbarDimensions||measureScrollbar();options=$.extend({},defaults,options);columnDefaults.width=options.defaultColumnWidth;if(options.enableColumnReorder&&!$.fn.sortable){throw new Error('SlickGrid\'s "enableColumnReorder = true" option requires jquery-ui.sortable module to be loaded')}editController={commitCurrentEdit:commitCurrentEdit,cancelCurrentEdit:cancelCurrentEdit};$container.empty().attr("tabIndex",0).attr("hideFocus",true).css("overflow","hidden").css("outline",0).addClass(uid).addClass("ui-widget");if(!/relative|absolute|fixed/.test($container.css("position"))){$container.css("position","relative")}$headerScroller=$("<div class='slick-header ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container);$headers=$("<div class='slick-header-columns' style='width:100000px; left:-10000px' />").appendTo($headerScroller);$headerRowScroller=$("<div class='slick-headerrow ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container);$headerRow=$("<div class='slick-headerrow-columns' style='width:100000px;' />").appendTo($headerRowScroller);$topPanelScroller=$("<div class='slick-top-panel-scroller ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container);$topPanel=$("<div class='slick-top-panel' style='width:100000px' />").appendTo($topPanelScroller);if(!options.showTopPanel){$topPanelScroller.hide()}if(!options.showHeaderRow){$headerRowScroller.hide()}$viewport=$("<div class='slick-viewport' tabIndex='0' hideFocus style='width:100%;overflow-x:auto;outline:0;position:relative;overflow-y:auto;'>").appendTo($container);$canvas=$("<div class='grid-canvas' tabIndex='0' hideFocus />").appendTo($viewport);measureCellPaddingAndBorder();disableSelection($headers);$viewport.bind("selectstart.ui",function(event){return $(event.target).is("input,textarea")});viewportW=parseFloat($.css($container[0],"width",true));createColumnHeaders();setupColumnSort();createCssRules();resizeAndRender();bindAncestorScrollEvents();$viewport.bind("scroll.slickgrid",handleScroll);$container.bind("resize.slickgrid",resizeAndRender);$headerScroller.bind("contextmenu.slickgrid",handleHeaderContextMenu).bind("click.slickgrid",handleHeaderClick);$canvas.bind("keydown.slickgrid",handleKeyDown).bind("click.slickgrid",handleClick).bind("dblclick.slickgrid",handleDblClick).bind("contextmenu.slickgrid",handleContextMenu).bind("draginit",handleDragInit).bind("dragstart",handleDragStart).bind("drag",handleDrag).bind("dragend",handleDragEnd);$canvas.delegate(".slick-cell","mouseenter",handleMouseEnter);$canvas.delegate(".slick-cell","mouseleave",handleMouseLeave)}function registerPlugin(plugin){plugins.unshift(plugin);plugin.init(self)}function unregisterPlugin(plugin){for(var i=plugins.length;i>=0;i--){if(plugins[i]===plugin){if(plugins[i].destroy){plugins[i].destroy()}plugins.splice(i,1);break}}}function setSelectionModel(model){if(selectionModel){selectionModel.onSelectedRangesChanged.unsubscribe(handleSelectedRangesChanged);if(selectionModel.destroy){selectionModel.destroy()}}selectionModel=model;selectionModel.init(self);selectionModel.onSelectedRangesChanged.subscribe(handleSelectedRangesChanged)}function getSelectionModel(){return selectionModel}function getCanvasNode(){return $canvas[0]}function measureScrollbar(){var $c=$("<div style='position:absolute; top:-10000px; left:-10000px; width:100px; height:100px; overflow:scroll;'></div>").appendTo("body");var dim={width:$c.width()-$c[0].clientWidth,height:$c.height()-$c[0].clientHeight};$c.remove();return dim}function getRowWidth(){var rowWidth=0;var i=columns.length;while(i--){rowWidth+=(columns[i].currentWidth||columns[i].width||columnDefaults.width)}return rowWidth}function setCanvasWidth(width){$canvas.width(width);viewportHasHScroll=(width>viewportW-scrollbarDimensions.width)}function disableSelection($target){if($target&&$target.jquery){$target.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})}}function getMaxSupportedCssHeight(){var increment=1000000;var supportedHeight=0;var testUpTo=($.browser.mozilla)?5000000:1000000000;var div=$("<div style='display:none' />").appendTo(document.body);while(supportedHeight<=testUpTo){div.css("height",supportedHeight+increment);if(div.height()!==supportedHeight+increment){break}else{supportedHeight+=increment}}div.remove();return supportedHeight}function bindAncestorScrollEvents(){var elem=$canvas[0];while((elem=elem.parentNode)!=document.body){if(elem==$viewport[0]||elem.scrollWidth!=elem.clientWidth||elem.scrollHeight!=elem.clientHeight){$(elem).bind("scroll.slickgrid",handleActiveCellPositionChange)}}}function unbindAncestorScrollEvents(){$canvas.parents().unbind("scroll.slickgrid")}function updateColumnHeader(columnId,title,toolTip){var idx=getColumnIndex(columnId);var $header=$headers.children().eq(idx);if($header){columns[idx].name=title;columns[idx].toolTip=toolTip;$header.attr("title",toolTip||title||"").children().eq(0).html(title)}}function getHeaderRow(){return $headerRow[0]}function getHeaderRowColumn(columnId){var idx=getColumnIndex(columnId);var $header=$headerRow.children().eq(idx);return $header&&$header[0]}function createColumnHeaders(){var i;function hoverBegin(){$(this).addClass("ui-state-hover")}function hoverEnd(){$(this).removeClass("ui-state-hover")}$headers.empty();$headerRow.empty();columnsById={};for(i=0;i<columns.length;i++){var m=columns[i]=$.extend({},columnDefaults,columns[i]);columnsById[m.id]=i;var header=$("<div class='ui-state-default slick-header-column' id='"+uid+m.id+"' />").html("<span class='slick-column-name'>"+m.name+"</span>").width((m.currentWidth||m.width)-headerColumnWidthDiff).attr("title",m.toolTip||m.name||"").data("fieldId",m.id).appendTo($headers);if(options.enableColumnReorder||m.sortable){header.hover(hoverBegin,hoverEnd)}if(m.sortable){header.append("<span class='slick-sort-indicator' />")}if(options.showHeaderRow){$("<div class='ui-state-default slick-headerrow-column c"+i+"'></div>").appendTo($headerRow)}}setSortColumn(sortColumnId,sortAsc);setupColumnResize();if(options.enableColumnReorder){setupColumnReorder()}}function setupColumnSort(){$headers.click(function(e){if($(e.target).hasClass("slick-resizable-handle")){return}var $col=$(e.target).closest(".slick-header-column");if(!$col.length){return}var column=columns[getSiblingIndex($col[0])];if(column.sortable){if(!getEditorLock().commitCurrentEdit()){return}if(column.id===sortColumnId){sortAsc=!sortAsc}else{sortColumnId=column.id;sortAsc=true}setSortColumn(sortColumnId,sortAsc);trigger(self.onSort,{sortCol:column,sortAsc:sortAsc})}})}function setupColumnReorder(){$headers.sortable({containment:"parent",axis:"x",cursor:"default",tolerance:"intersection",helper:"clone",placeholder:"slick-sortable-placeholder ui-state-default slick-header-column",forcePlaceholderSize:true,start:function(e,ui){$(ui.helper).addClass("slick-header-column-active")},beforeStop:function(e,ui){$(ui.helper).removeClass("slick-header-column-active")},stop:function(e){if(!getEditorLock().commitCurrentEdit()){$(this).sortable("cancel");return}var reorderedIds=$headers.sortable("toArray");var reorderedColumns=[];for(var i=0;i<reorderedIds.length;i++){reorderedColumns.push(columns[getColumnIndex(reorderedIds[i].replace(uid,""))])}setColumns(reorderedColumns);trigger(self.onColumnsReordered,{});e.stopPropagation();setupColumnResize()}})}function setupColumnResize(){var $col,j,c,pageX,columnElements,minPageX,maxPageX,firstResizable,lastResizable,originalCanvasWidth;columnElements=$headers.children();columnElements.find(".slick-resizable-handle").remove();columnElements.each(function(i,e){if(columns[i].resizable){if(firstResizable===undefined){firstResizable=i}lastResizable=i}});if(firstResizable===undefined){return}columnElements.each(function(i,e){if(i<firstResizable||(options.forceFitColumns&&i>=lastResizable)){return}$col=$(e);$("<div class='slick-resizable-handle' />").appendTo(e).bind("dragstart",function(e,dd){if(!getEditorLock().commitCurrentEdit()){return false}pageX=e.pageX;$(this).parent().addClass("slick-header-column-active");var shrinkLeewayOnRight=null,stretchLeewayOnRight=null;columnElements.each(function(i,e){columns[i].previousWidth=$(e).outerWidth()});if(options.forceFitColumns){shrinkLeewayOnRight=0;stretchLeewayOnRight=0;for(j=i+1;j<columnElements.length;j++){c=columns[j];if(c.resizable){if(stretchLeewayOnRight!==null){if(c.maxWidth){stretchLeewayOnRight+=c.maxWidth-c.previousWidth}else{stretchLeewayOnRight=null}}shrinkLeewayOnRight+=c.previousWidth-Math.max(c.minWidth||0,absoluteColumnMinWidth)}}}var shrinkLeewayOnLeft=0,stretchLeewayOnLeft=0;for(j=0;j<=i;j++){c=columns[j];if(c.resizable){if(stretchLeewayOnLeft!==null){if(c.maxWidth){stretchLeewayOnLeft+=c.maxWidth-c.previousWidth}else{stretchLeewayOnLeft=null}}shrinkLeewayOnLeft+=c.previousWidth-Math.max(c.minWidth||0,absoluteColumnMinWidth)}}if(shrinkLeewayOnRight===null){shrinkLeewayOnRight=100000}if(shrinkLeewayOnLeft===null){shrinkLeewayOnLeft=100000}if(stretchLeewayOnRight===null){stretchLeewayOnRight=100000}if(stretchLeewayOnLeft===null){stretchLeewayOnLeft=100000}maxPageX=pageX+Math.min(shrinkLeewayOnRight,stretchLeewayOnLeft);minPageX=pageX-Math.min(shrinkLeewayOnLeft,stretchLeewayOnRight);originalCanvasWidth=$canvas.width()}).bind("drag",function(e,dd){var actualMinWidth,d=Math.min(maxPageX,Math.max(minPageX,e.pageX))-pageX,x,ci;if(d<0){x=d;for(j=i;j>=0;j--){c=columns[j];if(c.resizable){actualMinWidth=Math.max(c.minWidth||0,absoluteColumnMinWidth);if(x&&c.previousWidth+x<actualMinWidth){x+=c.previousWidth-actualMinWidth;styleColumnWidth(j,actualMinWidth,options.syncColumnCellResize)}else{styleColumnWidth(j,c.previousWidth+x,options.syncColumnCellResize);x=0}}}if(options.forceFitColumns){x=-d;for(j=i+1;j<columnElements.length;j++){c=columns[j];if(c.resizable){if(x&&c.maxWidth&&(c.maxWidth-c.previousWidth<x)){x-=c.maxWidth-c.previousWidth;styleColumnWidth(j,c.maxWidth,options.syncColumnCellResize)}else{styleColumnWidth(j,c.previousWidth+x,options.syncColumnCellResize);x=0}}}}else{if(options.syncColumnCellResize){setCanvasWidth(originalCanvasWidth+d)}}}else{x=d;for(j=i;j>=0;j--){c=columns[j];if(c.resizable){if(x&&c.maxWidth&&(c.maxWidth-c.previousWidth<x)){x-=c.maxWidth-c.previousWidth;styleColumnWidth(j,c.maxWidth,options.syncColumnCellResize)}else{styleColumnWidth(j,c.previousWidth+x,options.syncColumnCellResize);x=0}}}if(options.forceFitColumns){x=-d;for(j=i+1;j<columnElements.length;j++){c=columns[j];if(c.resizable){actualMinWidth=Math.max(c.minWidth||0,absoluteColumnMinWidth);if(x&&c.previousWidth+x<actualMinWidth){x+=c.previousWidth-actualMinWidth;styleColumnWidth(j,actualMinWidth,options.syncColumnCellResize)}else{styleColumnWidth(j,c.previousWidth+x,options.syncColumnCellResize);x=0}}}}else{if(options.syncColumnCellResize){setCanvasWidth(originalCanvasWidth+d)}}}}).bind("dragend",function(e,dd){var newWidth;$(this).parent().removeClass("slick-header-column-active");for(j=0;j<columnElements.length;j++){c=columns[j];newWidth=$(columnElements[j]).outerWidth();if(c.previousWidth!==newWidth&&c.rerenderOnResize){invalidateAllRows()}if(options.forceFitColumns){c.width=Math.floor(c.width*(newWidth-c.previousWidth)/c.previousWidth)+c.width}else{c.width=newWidth}if(!options.syncColumnCellResize&&c.previousWidth!==newWidth){styleColumnWidth(j,newWidth,true)}}resizeCanvas();trigger(self.onColumnsResized,{})})})}function getVBoxDelta($el){var p=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];var delta=0;$.each(p,function(n,val){delta+=parseFloat($el.css(val))||0});return delta}function measureCellPaddingAndBorder(){var el;var h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"];var v=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];el=$("<div class='ui-state-default slick-header-column' style='visibility:hidden'>-</div>").appendTo($headers);headerColumnWidthDiff=headerColumnHeightDiff=0;$.each(h,function(n,val){headerColumnWidthDiff+=parseFloat(el.css(val))||0});$.each(v,function(n,val){headerColumnHeightDiff+=parseFloat(el.css(val))||0});el.remove();var r=$("<div class='slick-row' />").appendTo($canvas);el=$("<div class='slick-cell' id='' style='visibility:hidden'>-</div>").appendTo(r);cellWidthDiff=cellHeightDiff=0;$.each(h,function(n,val){cellWidthDiff+=parseFloat(el.css(val))||0});$.each(v,function(n,val){cellHeightDiff+=parseFloat(el.css(val))||0});r.remove();absoluteColumnMinWidth=Math.max(headerColumnWidthDiff,cellWidthDiff)}function createCssRules(){$style=$("<style type='text/css' rel='stylesheet' />").appendTo($("head"));var rowHeight=(options.rowHeight-cellHeightDiff);var rules=["."+uid+" .slick-header-column { left: 10000px; }","."+uid+" .slick-top-panel { height:"+options.topPanelHeight+"px; }","."+uid+" .slick-headerrow-columns { height:"+options.headerRowHeight+"px; }","."+uid+" .slick-cell { height:"+rowHeight+"px; }","."+uid+" .slick-row { width:"+getRowWidth()+"px; }"];for(var i=0;i<columns.length;i++){rules.push("."+uid+" .c"+i+" { width:"+((columns[i].currentWidth||columns[i].width)-cellWidthDiff)+"px;  } ")}if($style[0].styleSheet){$style[0].styleSheet.cssText=rules.join("")}else{$style[0].appendChild(document.createTextNode(rules.join(" ")))}var sheets=document.styleSheets;for(var i=0;i<sheets.length;i++){if((sheets[i].ownerNode||sheets[i].owningElement)==$style[0]){stylesheet=sheets[i];break}}}function findCssRule(selector){var rules=(stylesheet.cssRules||stylesheet.rules);for(var i=0;i<rules.length;i++){if(rules[i].selectorText==selector){return rules[i]}}return null}function findCssRuleForCell(index){return findCssRule("."+uid+" .c"+index)}function removeCssRules(){$style.remove()}function destroy(){getEditorLock().cancelCurrentEdit();trigger(self.onBeforeDestroy,{});for(var i=0;i<plugins.length;i++){unregisterPlugin(plugin)}if(options.enableColumnReorder&&$headers.sortable){$headers.sortable("destroy")}unbindAncestorScrollEvents();$container.unbind(".slickgrid");removeCssRules();$canvas.unbind("draginit dragstart dragend drag");$container.empty().removeClass(uid)}function trigger(evt,args,e){e=e||new Slick.EventData();args=args||{};args.grid=self;return evt.notify(args,e,self)}function getEditorLock(){return options.editorLock}function getEditController(){return editController}function getColumnIndex(id){return columnsById[id]}function autosizeColumns(){var i,c,widths=[],shrinkLeeway=0,availWidth=(options.autoHeight?viewportW:viewportW-scrollbarDimensions.width),total=0,existingTotal=0;for(i=0;i<columns.length;i++){c=columns[i];widths.push(c.width);existingTotal+=c.width;shrinkLeeway+=c.width-Math.max(c.minWidth||0,absoluteColumnMinWidth)}total=existingTotal;invalidateAllRows();while(total>availWidth){if(!shrinkLeeway){return}var shrinkProportion=(total-availWidth)/shrinkLeeway;for(i=0;i<columns.length&&total>availWidth;i++){c=columns[i];if(!c.resizable||c.minWidth===c.width||c.width===absoluteColumnMinWidth){continue}var shrinkSize=Math.floor(shrinkProportion*(c.width-Math.max(c.minWidth||0,absoluteColumnMinWidth)))||1;total-=shrinkSize;widths[i]-=shrinkSize}}var previousTotal=total;while(total<availWidth){var growProportion=availWidth/total;for(i=0;i<columns.length&&total<availWidth;i++){c=columns[i];if(!c.resizable||c.maxWidth<=c.width){continue}var growSize=Math.min(Math.floor(growProportion*c.width)-c.width,(c.maxWidth-c.width)||1000000)||1;total+=growSize;widths[i]+=growSize}if(previousTotal==total){break}previousTotal=total}for(i=0;i<columns.length;i++){styleColumnWidth(i,columns[i].currentWidth=widths[i],true)}resizeCanvas()}function styleColumnWidth(index,width,styleCells){columns[index].currentWidth=width;$headers.children().eq(index).css("width",width-headerColumnWidthDiff);if(styleCells){findCssRuleForCell(index).style.width=(width-cellWidthDiff)+"px";findCssRule("."+uid+" .slick-row").style.width=getRowWidth()+"px"}}function setSortColumn(columnId,ascending){sortColumnId=columnId;sortAsc=ascending;var columnIndex=getColumnIndex(sortColumnId);$headers.children().removeClass("slick-header-column-sorted");$headers.find(".slick-sort-indicator").removeClass("slick-sort-indicator-asc slick-sort-indicator-desc");if(columnIndex!=null){$headers.children().eq(columnIndex).addClass("slick-header-column-sorted").find(".slick-sort-indicator").addClass(sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc")}}function handleSelectedRangesChanged(e,ranges){selectedRows=[];var hash={};for(var i=0;i<ranges.length;i++){for(var j=ranges[i].fromRow;j<=ranges[i].toRow;j++){if(!hash[j]){selectedRows.push(j)}hash[j]={};for(var k=ranges[i].fromCell;k<=ranges[i].toCell;k++){hash[j][columns[k].id]=options.selectedCellCssClass}}}setCellCssStyles(options.selectedCellCssClass,hash);trigger(self.onSelectedRowsChanged,{rows:getSelectedRows()},e)}function getColumns(){return columns}function setColumns(columnDefinitions){columns=columnDefinitions;invalidateAllRows();createColumnHeaders();removeCssRules();createCssRules();resizeAndRender();handleScroll()}function getOptions(){return options}function setOptions(args){if(!getEditorLock().commitCurrentEdit()){return}makeActiveCellNormal();if(options.enableAddRow!==args.enableAddRow){invalidateRow(getDataLength())}options=$.extend(options,args);render()}function setData(newData,scrollToTop){invalidateAllRows();gridData=newData;if(scrollToTop){scrollTo(0)}}function getData(){return gridData}function getDataLength(){if(gridData.getLength){return gridData.getLength()}else{return gridData.length}}function getDataItem(i){if(gridData.getItem){return gridData.getItem(i)}else{return gridData[i]}}function getTopPanel(){return $topPanel[0]}function showTopPanel(){options.showTopPanel=true;$topPanelScroller.slideDown("fast",resizeCanvas)}function hideTopPanel(){options.showTopPanel=false;$topPanelScroller.slideUp("fast",resizeCanvas)}function showHeaderRowColumns(){options.showHeaderRow=true;$headerRowScroller.slideDown("fast",resizeCanvas)}function hideHeaderRowColumns(){options.showHeaderRow=false;$headerRowScroller.slideUp("fast",resizeCanvas)}function scrollTo(y){var oldOffset=offset;page=Math.min(n-1,Math.floor(y/ph));offset=Math.round(page*cj);var newScrollTop=y-offset;if(offset!=oldOffset){var range=getVisibleRange(newScrollTop);cleanupRows(range.top,range.bottom);updateRowPositions()}if(prevScrollTop!=newScrollTop){scrollDir=(prevScrollTop+oldOffset<newScrollTop+offset)?1:-1;$viewport[0].scrollTop=(lastRenderedScrollTop=scrollTop=prevScrollTop=newScrollTop);trigger(self.onViewportChanged,{})}}function defaultFormatter(row,cell,value,columnDef,dataContext){return(value===null||value===undefined)?"":value}function getFormatter(column){return column.formatter||(options.formatterFactory&&options.formatterFactory.getFormatter(column))||defaultFormatter}function getEditor(column){return column.editor||(options.editorFactory&&options.editorFactory.getEditor(column))}function appendRowHtml(stringArray,row){var d=getDataItem(row);var dataLoading=row<getDataLength()&&!d;var cellCss;var css="slick-row "+(dataLoading?" loading":"")+(row%2==1?" odd":" even");if(options.rowCssClasses){css+=" "+options.rowCssClasses(d)}if(d instanceof Slick.GroupTotals){css+=" slick-group-totals"}stringArray.push("<div class='ui-widget-content "+css+"' row='"+row+"' style='top:"+(options.rowHeight*row-offset)+"px'>");if(d instanceof Slick.Group){stringArray.push("<div class='slick-cell slick-group"+(row===activeRow?" active":"")+"'>");stringArray.push("<span class='slick-group-toggle "+(d.collapsed?"collapsed":"expanded")+"'></span>");stringArray.push(d.title);stringArray.push("</div>")}else{for(var i=0,cols=columns.length;i<cols;i++){var m=columns[i];cellCss="slick-cell c"+i+(m.cssClass?" "+m.cssClass:"");if(row===activeRow&&i===activeCell){cellCss+=(" active")}if(!(d instanceof Slick.NonDataRow)){for(var key in cellCssClasses){if(cellCssClasses[key][row]&&cellCssClasses[key][row][m.id]){cellCss+=(" "+cellCssClasses[key][row][m.id])}}}stringArray.push("<div class='"+cellCss+"'>");if(d){if(d instanceof Slick.GroupTotals){if(m.groupTotalsFormatter){stringArray.push(m.groupTotalsFormatter(d,m))}}else{stringArray.push(getFormatter(m)(row,i,d[m.field],m,d))}}stringArray.push("</div>")}}stringArray.push("</div>")}function cleanupRows(rangeToKeep){for(var i in rowsCache){if(((i=parseInt(i,10))!==activeRow)&&(i<rangeToKeep.top||i>rangeToKeep.bottom)){removeRowFromCache(i)}}}function invalidate(){updateRowCount();invalidateAllRows();render()}function invalidateAllRows(){if(currentEditor){makeActiveCellNormal()}for(var row in rowsCache){removeRowFromCache(row)}}function removeRowFromCache(row){var node=rowsCache[row];if(!node){return}$canvas[0].removeChild(node);delete rowsCache[row];delete postProcessedRows[row];renderedRows--;counter_rows_removed++}function invalidateRows(rows){var i,rl;if(!rows||!rows.length){return}scrollDir=0;for(i=0,rl=rows.length;i<rl;i++){if(currentEditor&&activeRow===i){makeActiveCellNormal()}if(rowsCache[rows[i]]){removeRowFromCache(rows[i])}}}function invalidateRow(row){invalidateRows([row])}function updateCell(row,cell){var cellNode=getCellNode(row,cell);if(!cellNode){return}var m=columns[cell],d=getDataItem(row);if(currentEditor&&activeRow===row&&activeCell===cell){currentEditor.loadValue(d)}else{cellNode.innerHTML=d?getFormatter(m)(row,cell,d[m.field],m,d):"";invalidatePostProcessingResults(row)}}function updateRow(row){if(!rowsCache[row]){return}$(rowsCache[row]).children().each(function(i){var m=columns[i];if(row===activeRow&&i===activeCell&&currentEditor){currentEditor.loadValue(getDataItem(activeRow))}else{if(getDataItem(row)){this.innerHTML=getFormatter(m)(row,i,getDataItem(row)[m.field],m,getDataItem(row))}else{this.innerHTML=""}}});invalidatePostProcessingResults(row)}function getViewportHeight(){return parseFloat($.css($container[0],"height",true))-options.headerHeight-getVBoxDelta($headers)-(options.showTopPanel?options.topPanelHeight+getVBoxDelta($topPanelScroller):0)-(options.showHeaderRow?options.headerRowHeight+getVBoxDelta($headerRowScroller):0)}function resizeCanvas(){if(options.autoHeight){viewportH=options.rowHeight*(getDataLength()+(options.enableAddRow?1:0)+(options.leaveSpaceForNewRows?numVisibleRows-1:0))}else{viewportH=getViewportHeight()}numVisibleRows=Math.ceil(viewportH/options.rowHeight);viewportW=parseFloat($.css($container[0],"width",true));$viewport.height(viewportH);var w=0,i=columns.length;while(i--){w+=columns[i].currentWidth||columns[i].width}setCanvasWidth(w);updateRowCount();render()}function resizeAndRender(){if(options.forceFitColumns){autosizeColumns()}else{resizeCanvas()}}function updateRowCount(){var newRowCount=getDataLength()+(options.enableAddRow?1:0)+(options.leaveSpaceForNewRows?numVisibleRows-1:0);var oldH=h;var l=options.enableAddRow?getDataLength():getDataLength()-1;for(var i in rowsCache){if(i>=l){removeRowFromCache(i)}}th=Math.max(options.rowHeight*newRowCount,viewportH-scrollbarDimensions.height);if(th<maxSupportedCssHeight){h=ph=th;n=1;cj=0}else{h=maxSupportedCssHeight;ph=h/100;n=Math.floor(th/ph);cj=(th-h)/(n-1)}if(h!==oldH){$canvas.css("height",h);scrollTop=$viewport[0].scrollTop}var oldScrollTopInRange=(scrollTop+offset<=th-viewportH);if(th==0||scrollTop==0){page=offset=0}else{if(oldScrollTopInRange){scrollTo(scrollTop+offset)}else{scrollTo(th-viewportH)}}if(h!=oldH&&options.autoHeight){resizeCanvas()}}function getVisibleRange(viewportTop){if(viewportTop==null){viewportTop=scrollTop}return{top:Math.floor((scrollTop+offset)/options.rowHeight),bottom:Math.ceil((scrollTop+offset+viewportH)/options.rowHeight)}}function getRenderedRange(viewportTop){var range=getVisibleRange(viewportTop);var buffer=Math.round(viewportH/options.rowHeight);var minBuffer=3;if(scrollDir==-1){range.top-=buffer;range.bottom+=minBuffer}else{if(scrollDir==1){range.top-=minBuffer;range.bottom+=buffer}else{range.top-=minBuffer;range.bottom+=minBuffer}}range.top=Math.max(0,range.top);range.bottom=Math.min(options.enableAddRow?getDataLength():getDataLength()-1,range.bottom);return range}function renderRows(range){var i,l,parentNode=$canvas[0],rowsBefore=renderedRows,stringArray=[],rows=[],startTimestamp=new Date(),needToReselectCell=false;for(i=range.top;i<=range.bottom;i++){if(rowsCache[i]){continue}renderedRows++;rows.push(i);appendRowHtml(stringArray,i);if(activeCellNode&&activeRow===i){needToReselectCell=true}counter_rows_rendered++}var x=document.createElement("div");x.innerHTML=stringArray.join("");for(i=0,l=x.childNodes.length;i<l;i++){rowsCache[rows[i]]=parentNode.appendChild(x.firstChild)}if(needToReselectCell){activeCellNode=getCellNode(activeRow,activeCell)}if(renderedRows-rowsBefore>5){avgRowRenderTime=(new Date()-startTimestamp)/(renderedRows-rowsBefore)}}function startPostProcessing(){if(!options.enableAsyncPostRender){return}clearTimeout(h_postrender);h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay)}function invalidatePostProcessingResults(row){delete postProcessedRows[row];postProcessFromRow=Math.min(postProcessFromRow,row);postProcessToRow=Math.max(postProcessToRow,row);startPostProcessing()}function updateRowPositions(){for(var row in rowsCache){rowsCache[row].style.top=(row*options.rowHeight-offset)+"px"}}function render(){var visible=getVisibleRange();var rendered=getRenderedRange();cleanupRows(rendered);renderRows(rendered);postProcessFromRow=visible.top;postProcessToRow=Math.min(options.enableAddRow?getDataLength():getDataLength()-1,visible.bottom);startPostProcessing();lastRenderedScrollTop=scrollTop;h_render=null}function handleScroll(){scrollTop=$viewport[0].scrollTop;var scrollLeft=$viewport[0].scrollLeft;var scrollDist=Math.abs(scrollTop-prevScrollTop);if(scrollLeft!==prevScrollLeft){prevScrollLeft=scrollLeft;$headerScroller[0].scrollLeft=scrollLeft;$topPanelScroller[0].scrollLeft=scrollLeft;$headerRowScroller[0].scrollLeft=scrollLeft}if(scrollDist){scrollDir=prevScrollTop<scrollTop?1:-1;prevScrollTop=scrollTop;if(scrollDist<viewportH){scrollTo(scrollTop+offset)}else{var oldOffset=offset;page=Math.min(n-1,Math.floor(scrollTop*((th-viewportH)/(h-viewportH))*(1/ph)));offset=Math.round(page*cj);if(oldOffset!=offset){invalidateAllRows()}}if(h_render){clearTimeout(h_render)}if(Math.abs(lastRenderedScrollTop-scrollTop)<viewportH){render()}else{h_render=setTimeout(render,50)}trigger(self.onViewportChanged,{})}trigger(self.onScroll,{scrollLeft:scrollLeft,scrollTop:scrollTop})}function asyncPostProcessRows(){while(postProcessFromRow<=postProcessToRow){var row=(scrollDir>=0)?postProcessFromRow++:postProcessToRow--;var rowNode=rowsCache[row];if(!rowNode||postProcessedRows[row]||row>=getDataLength()){continue}var d=getDataItem(row),cellNodes=rowNode.childNodes;for(var i=0,j=0,l=columns.length;i<l;++i){var m=columns[i];if(m.asyncPostRender){m.asyncPostRender(cellNodes[j],postProcessFromRow,d,m)}++j}postProcessedRows[row]=true;h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay);return}}function addCellCssStyles(key,hash){if(cellCssClasses[key]){throw"addCellCssStyles: cell CSS hash with key '"+key+"' already exists."}cellCssClasses[key]=hash;for(var row in rowsCache){if(hash[row]){if(!(getDataItem(row) instanceof Slick.NonDataRow)){for(var columnId in hash[row]){$(rowsCache[row]).children().eq(getColumnIndex(columnId)).addClass(hash[row][columnId])}}}}}function removeCellCssStyles(key){if(!cellCssClasses[key]){return}for(var row in rowsCache){if(cellCssClasses[key][row]){for(var columnId in cellCssClasses[key][row]){$(rowsCache[row]).children().eq(getColumnIndex(columnId)).removeClass(cellCssClasses[key][row][columnId])}}}delete cellCssClasses[key]}function setCellCssStyles(key,hash){removeCellCssStyles(key);addCellCssStyles(key,hash)}function flashCell(row,cell,speed){speed=speed||100;if(rowsCache[row]){var $cell=$(getCellNode(row,cell));function toggleCellClass(times){if(!times){return}setTimeout(function(){$cell.queue(function(){$cell.toggleClass(options.cellFlashingCssClass).dequeue();toggleCellClass(times-1)})},speed)}toggleCellClass(4)}}function getSiblingIndex(node){var idx=0;while(node&&node.previousSibling){idx++;node=node.previousSibling}return idx}function handleDragInit(e,dd){var cell=getCellFromEvent(e);if(!cell||!cellExists(cell.row,cell.cell)){return false}retval=trigger(self.onDragInit,dd,e);if(e.isImmediatePropagationStopped()){return retval}}function handleDragStart(e,dd){var cell=getCellFromEvent(e);if(!cell||!cellExists(cell.row,cell.cell)){return false}var retval=trigger(self.onDragStart,dd,e);if(e.isImmediatePropagationStopped()){return retval}return false}function handleDrag(e,dd){return trigger(self.onDrag,dd,e)}function handleDragEnd(e,dd){trigger(self.onDragEnd,dd,e)}function handleKeyDown(e){trigger(self.onKeyDown,{},e);var handled=e.isImmediatePropagationStopped();if(!handled){if(!e.shiftKey&&!e.altKey&&!e.ctrlKey){if(e.which==27){if(!getEditorLock().isActive()){return}cancelEditAndSetFocus()}else{if(e.which==37){navigateLeft()}else{if(e.which==39){navigateRight()}else{if(e.which==38){navigateUp()}else{if(e.which==40){navigateDown()}else{if(e.which==9){navigateNext()}else{if(e.which==13){if(options.editable){if(currentEditor){if(activeRow===getDataLength()){navigateDown()}else{commitEditAndSetFocus()}}else{if(getEditorLock().commitCurrentEdit()){makeActiveCellEditable()}}}}else{return}}}}}}}}else{if(e.which==9&&e.shiftKey&&!e.ctrlKey&&!e.altKey){navigatePrev()}else{return}}}e.stopPropagation();e.preventDefault();try{e.originalEvent.keyCode=0}catch(error){}}function handleClick(e){var cell=getCellFromEvent(e);if(!cell||(currentEditor!==null&&activeRow==cell.row&&activeCell==cell.cell)){return}trigger(self.onClick,{row:cell.row,cell:cell.cell},e);if(e.isImmediatePropagationStopped()){return}if(options.enableCellNavigation&&!columns[cell.cell].unselectable){if(!getEditorLock().isActive()||getEditorLock().commitCurrentEdit()){scrollRowIntoView(cell.row,false);setActiveCellInternal(getCellNode(cell.row,cell.cell),(cell.row===getDataLength())||options.autoEdit)}}}function handleContextMenu(e){var $cell=$(e.target).closest(".slick-cell",$canvas);if($cell.length===0){return}if(activeCellNode===$cell[0]&&currentEditor!==null){return}trigger(self.onContextMenu,{},e)}function handleDblClick(e){var cell=getCellFromEvent(e);if(!cell||(currentEditor!==null&&activeRow==cell.row&&activeCell==cell.cell)){return}trigger(self.onDblClick,{row:cell.row,cell:cell.cell},e);if(e.isImmediatePropagationStopped()){return}if(options.editable){gotoCell(cell.row,cell.cell,true)}}function handleHeaderContextMenu(e){var $header=$(e.target).closest(".slick-header-column",".slick-header-columns");var column=$header&&columns[self.getColumnIndex($header.data("fieldId"))];trigger(self.onHeaderContextMenu,{column:column},e)}function handleHeaderClick(e){var $header=$(e.target).closest(".slick-header-column",".slick-header-columns");var column=$header&&columns[self.getColumnIndex($header.data("fieldId"))];trigger(self.onHeaderClick,{column:column},e)}function handleMouseEnter(e){trigger(self.onMouseEnter,{},e)}function handleMouseLeave(e){trigger(self.onMouseLeave,{},e)}function cellExists(row,cell){return !(row<0||row>=getDataLength()||cell<0||cell>=columns.length)}function getCellFromPoint(x,y){var row=Math.floor((y+offset)/options.rowHeight);var cell=0;var w=0;for(var i=0;i<columns.length&&w<x;i++){w+=(columns[i].currentWidth||columns[i].width);cell++}if(cell<0){cell=0}return{row:row,cell:cell-1}}function getCellFromEvent(e){var $cell=$(e.target).closest(".slick-cell",$canvas);if(!$cell.length){return null}return{row:$cell.parent().attr("row")|0,cell:getSiblingIndex($cell[0])}}function getCellNodeBox(row,cell){if(!cellExists(row,cell)){return null}var y1=row*options.rowHeight-offset;var y2=y1+options.rowHeight-1;var x1=0;for(var i=0;i<cell;i++){x1+=(columns[i].currentWidth||columns[i].width)}var x2=x1+(columns[cell].currentWidth||columns[cell].width);return{top:y1,left:x1,bottom:y2,right:x2}}function resetActiveCell(){setActiveCellInternal(null,false)}function setFocus(){if($.browser.msie){$canvas[0].setActive()}else{$canvas[0].focus()}}function scrollActiveCellIntoView(){if(activeCellNode){var left=$(activeCellNode).position().left,right=left+$(activeCellNode).outerWidth(),scrollLeft=$viewport.scrollLeft(),scrollRight=scrollLeft+$viewport.width();if(left<scrollLeft){$viewport.scrollLeft(left)}else{if(right>scrollRight){$viewport.scrollLeft(Math.min(left,right-$viewport[0].clientWidth))}}}}function setActiveCellInternal(newCell,editMode){if(activeCellNode!==null){makeActiveCellNormal();$(activeCellNode).removeClass("active")}var activeCellChanged=(activeCellNode!==newCell);activeCellNode=newCell;if(activeCellNode!=null){activeRow=parseInt($(activeCellNode).parent().attr("row"),10);activeCell=getSiblingIndex(activeCellNode);$(activeCellNode).addClass("active");if(options.editable&&editMode&&isCellPotentiallyEditable(activeRow,activeCell)){clearTimeout(h_editorLoader);if(options.asyncEditorLoading){h_editorLoader=setTimeout(makeActiveCellEditable,options.asyncEditorLoadDelay)}else{makeActiveCellEditable()}}else{setFocus()}}else{activeRow=null;activeCell=null}if(activeCellChanged){scrollActiveCellIntoView();trigger(self.onActiveCellChanged,getActiveCell())}}function clearTextSelection(){if(document.selection&&document.selection.empty){document.selection.empty()}else{if(window.getSelection){var sel=window.getSelection();if(sel&&sel.removeAllRanges){sel.removeAllRanges()}}}}function isCellPotentiallyEditable(row,cell){if(row<getDataLength()&&!getDataItem(row)){return false}if(getDataItem(row) instanceof Slick.NonDataRow){return false}if(columns[cell].cannotTriggerInsert&&row>=getDataLength()){return false}if(!getEditor(columns[cell])){return false}return true}function makeActiveCellNormal(){if(!currentEditor){return}trigger(self.onBeforeCellEditorDestroy,{editor:currentEditor});currentEditor.destroy();currentEditor=null;if(activeCellNode){$(activeCellNode).removeClass("editable invalid");if(getDataItem(activeRow)){var column=columns[activeCell];activeCellNode.innerHTML=getFormatter(column)(activeRow,activeCell,getDataItem(activeRow)[column.field],column,getDataItem(activeRow));invalidatePostProcessingResults(activeRow)}}if($.browser.msie){clearTextSelection()}getEditorLock().deactivate(editController)}function makeActiveCellEditable(editor){if(!activeCellNode){return}if(!options.editable){throw"Grid : makeActiveCellEditable : should never get called when options.editable is false"}clearTimeout(h_editorLoader);if(!isCellPotentiallyEditable(activeRow,activeCell)){return}var columnDef=columns[activeCell];var item=getDataItem(activeRow);if(trigger(self.onBeforeEditCell,{row:activeRow,cell:activeCell,item:item,column:columnDef})===false){setFocus();return}getEditorLock().activate(editController);$(activeCellNode).addClass("editable");if(!editor){activeCellNode.innerHTML=""}currentEditor=new (editor||getEditor(columnDef))({grid:self,gridPosition:absBox($container[0]),position:absBox(activeCellNode),container:activeCellNode,column:columnDef,item:item||{},commitChanges:commitEditAndSetFocus,cancelChanges:cancelEditAndSetFocus});if(item){currentEditor.loadValue(item)}serializedEditorValue=currentEditor.serializeValue();if(currentEditor.position){handleActiveCellPositionChange()}}function commitEditAndSetFocus(){if(getEditorLock().commitCurrentEdit()){setFocus();if(options.autoEdit){navigateDown()}}}function cancelEditAndSetFocus(){if(getEditorLock().cancelCurrentEdit()){setFocus()}}function absBox(elem){var box={top:elem.offsetTop,left:elem.offsetLeft,bottom:0,right:0,width:$(elem).outerWidth(),height:$(elem).outerHeight(),visible:true};box.bottom=box.top+box.height;box.right=box.left+box.width;var offsetParent=elem.offsetParent;while((elem=elem.parentNode)!=document.body){if(box.visible&&elem.scrollHeight!=elem.offsetHeight&&$(elem).css("overflowY")!="visible"){box.visible=box.bottom>elem.scrollTop&&box.top<elem.scrollTop+elem.clientHeight}if(box.visible&&elem.scrollWidth!=elem.offsetWidth&&$(elem).css("overflowX")!="visible"){box.visible=box.right>elem.scrollLeft&&box.left<elem.scrollLeft+elem.clientWidth}box.left-=elem.scrollLeft;box.top-=elem.scrollTop;if(elem===offsetParent){box.left+=elem.offsetLeft;box.top+=elem.offsetTop;offsetParent=elem.offsetParent}box.bottom=box.top+box.height;box.right=box.left+box.width}return box}function getActiveCellPosition(){return absBox(activeCellNode)}function getGridPosition(){return absBox($container[0])}function handleActiveCellPositionChange(){if(!activeCellNode){return}var cellBox;trigger(self.onActiveCellPositionChanged,{});if(currentEditor){cellBox=cellBox||getActiveCellPosition();if(currentEditor.show&&currentEditor.hide){if(!cellBox.visible){currentEditor.hide()}else{currentEditor.show()}}if(currentEditor.position){currentEditor.position(cellBox)}}}function getCellEditor(){return currentEditor}function getActiveCell(){if(!activeCellNode){return null}else{return{row:activeRow,cell:activeCell}}}function getActiveCellNode(){return activeCellNode}function scrollRowIntoView(row,doPaging){var rowAtTop=row*options.rowHeight;var rowAtBottom=(row+1)*options.rowHeight-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0);if((row+1)*options.rowHeight>scrollTop+viewportH+offset){scrollTo(doPaging?rowAtTop:rowAtBottom);render()}else{if(row*options.rowHeight<scrollTop+offset){scrollTo(doPaging?rowAtBottom:rowAtTop);render()}}}function gotoDir(dy,dx,rollover){if(!activeCellNode||!options.enableCellNavigation){return}if(!getEditorLock().commitCurrentEdit()){return}function selectableCellFilter(){return !columns[getSiblingIndex(this)].unselectable}var nextRow=rowsCache[activeRow+dy];var nextCell=(nextRow&&activeCell+dx>=0)?$(nextRow).children().eq(activeCell+dx).filter(selectableCellFilter):null;if(nextCell&&!nextCell.length){var nodes=$(nextRow).children().filter(function(index){return(dx>0)?index>activeCell+dx:index<activeCell+dx}).filter(selectableCellFilter);if(nodes&&nodes.length){nextCell=(dx>0)?nodes.eq(0):nodes.eq(nodes.length-1)}}if(rollover&&dy===0&&!(nextRow&&nextCell&&nextCell.length)){if(!nextCell||!nextCell.length){nextRow=rowsCache[activeRow+dy+((dx>0)?1:-1)];var nodes=$(nextRow).children().filter(selectableCellFilter);if(dx>0){nextCell=nextRow?nodes.eq(0):null}else{nextCell=nextRow?nodes.eq(nodes.length-1):null}}}if(nextRow&&nextCell&&nextCell.length){var row=parseInt($(nextRow).attr("row"),10);var isAddNewRow=(row==getDataLength());scrollRowIntoView(row,!isAddNewRow);setActiveCellInternal(nextCell[0],isAddNewRow||options.autoEdit);if(!currentEditor){setFocus()}}else{setFocus()}}function getCellNode(row,cell){if(rowsCache[row]){return $(rowsCache[row]).children().eq(cell)[0]}return null}function setActiveCell(row,cell){if(row>getDataLength()||row<0||cell>=columns.length||cell<0){return}if(!options.enableCellNavigation){return}scrollRowIntoView(row,false);setActiveCellInternal(getCellNode(row,cell),false)}function canCellBeSelected(row,cell){return row<getDataLength()&&row>=0&&cell<columns.length&&cell>=0&&!columns[cell].unselectable&&!(getDataItem(row) instanceof Slick.NonDataRow)}function gotoCell(row,cell,forceEdit){if(row>getDataLength()||row<0||cell>=columns.length||cell<0){return}if(!options.enableCellNavigation||columns[cell].unselectable){return}if(!getEditorLock().commitCurrentEdit()){return}scrollRowIntoView(row,false);var newCell=null;if(!columns[cell].unselectable){newCell=getCellNode(row,cell)}setActiveCellInternal(newCell,forceEdit||(row===getDataLength())||options.autoEdit);if(!currentEditor){setFocus()}}function navigateUp(){gotoDir(-1,0,false)}function navigateDown(){gotoDir(1,0,false)}function navigateLeft(){gotoDir(0,-1,false)}function navigateRight(){gotoDir(0,1,false)}function navigatePrev(){gotoDir(0,-1,true)}function navigateNext(){gotoDir(0,1,true)}function commitCurrentEdit(){var item=getDataItem(activeRow);var column=columns[activeCell];if(currentEditor){if(currentEditor.isValueChanged()){var validationResults=currentEditor.validate();if(validationResults.valid){if(activeRow<getDataLength()){var editCommand={row:activeRow,cell:activeCell,editor:currentEditor,serializedValue:currentEditor.serializeValue(),prevSerializedValue:serializedEditorValue,execute:function(){this.editor.applyValue(item,this.serializedValue);updateRow(this.row)},undo:function(){this.editor.applyValue(item,this.prevSerializedValue);updateRow(this.row)}};if(options.editCommandHandler){makeActiveCellNormal();options.editCommandHandler(item,column,editCommand)}else{editCommand.execute();makeActiveCellNormal()}trigger(self.onCellChange,{row:activeRow,cell:activeCell,item:item})}else{var newItem={};currentEditor.applyValue(newItem,currentEditor.serializeValue());makeActiveCellNormal();trigger(self.onAddNewRow,{item:newItem,column:column})}return !getEditorLock().isActive()}else{$(activeCellNode).addClass("invalid");$(activeCellNode).stop(true,true).effect("highlight",{color:"red"},300);trigger(self.onValidationError,{editor:currentEditor,cellNode:activeCellNode,validationResults:validationResults,row:activeRow,cell:activeCell,column:column});currentEditor.focus();return false}}makeActiveCellNormal()}return true}function cancelCurrentEdit(){makeActiveCellNormal();return true}function rowsToRanges(rows){var ranges=[];var lastCell=columns.length-1;for(var i=0;i<rows.length;i++){ranges.push(new Slick.Range(rows[i],0,rows[i],lastCell))}return ranges}function getSelectedRows(){if(!selectionModel){throw"Selection model is not set"}return selectedRows}function setSelectedRows(rows){if(!selectionModel){throw"Selection model is not set"}selectionModel.setSelectedRanges(rowsToRanges(rows))}this.debug=function(){var s="";s+=("\ncounter_rows_rendered:  "+counter_rows_rendered);s+=("\ncounter_rows_removed:  "+counter_rows_removed);s+=("\nrenderedRows:  "+renderedRows);s+=("\nnumVisibleRows:  "+numVisibleRows);s+=("\nmaxSupportedCssHeight:  "+maxSupportedCssHeight);s+=("\nn(umber of pages):  "+n);s+=("\n(current) page:  "+page);s+=("\npage height (ph):  "+ph);s+=("\nscrollDir:  "+scrollDir);alert(s)};this.eval=function(expr){return eval(expr)};$.extend(this,{slickGridVersion:"2.0a1",onScroll:new Slick.Event(),onSort:new Slick.Event(),onHeaderContextMenu:new Slick.Event(),onHeaderClick:new Slick.Event(),onMouseEnter:new Slick.Event(),onMouseLeave:new Slick.Event(),onClick:new Slick.Event(),onDblClick:new Slick.Event(),onContextMenu:new Slick.Event(),onKeyDown:new Slick.Event(),onAddNewRow:new Slick.Event(),onValidationError:new Slick.Event(),onViewportChanged:new Slick.Event(),onColumnsReordered:new Slick.Event(),onColumnsResized:new Slick.Event(),onCellChange:new Slick.Event(),onBeforeEditCell:new Slick.Event(),onBeforeCellEditorDestroy:new Slick.Event(),onBeforeDestroy:new Slick.Event(),onActiveCellChanged:new Slick.Event(),onActiveCellPositionChanged:new Slick.Event(),onDragInit:new Slick.Event(),onDragStart:new Slick.Event(),onDrag:new Slick.Event(),onDragEnd:new Slick.Event(),onSelectedRowsChanged:new Slick.Event(),registerPlugin:registerPlugin,unregisterPlugin:unregisterPlugin,getColumns:getColumns,setColumns:setColumns,getColumnIndex:getColumnIndex,updateColumnHeader:updateColumnHeader,setSortColumn:setSortColumn,autosizeColumns:autosizeColumns,getOptions:getOptions,setOptions:setOptions,getData:getData,getDataLength:getDataLength,getDataItem:getDataItem,setData:setData,getSelectionModel:getSelectionModel,setSelectionModel:setSelectionModel,getSelectedRows:getSelectedRows,setSelectedRows:setSelectedRows,render:render,invalidate:invalidate,invalidateRow:invalidateRow,invalidateRows:invalidateRows,invalidateAllRows:invalidateAllRows,updateCell:updateCell,updateRow:updateRow,getViewport:getVisibleRange,resizeCanvas:resizeCanvas,updateRowCount:updateRowCount,scrollRowIntoView:scrollRowIntoView,getCanvasNode:getCanvasNode,getCellFromPoint:getCellFromPoint,getCellFromEvent:getCellFromEvent,getActiveCell:getActiveCell,setActiveCell:setActiveCell,getActiveCellNode:getActiveCellNode,getActiveCellPosition:getActiveCellPosition,resetActiveCell:resetActiveCell,editActiveCell:makeActiveCellEditable,getCellEditor:getCellEditor,getCellNode:getCellNode,getCellNodeBox:getCellNodeBox,canCellBeSelected:canCellBeSelected,navigatePrev:navigatePrev,navigateNext:navigateNext,navigateUp:navigateUp,navigateDown:navigateDown,navigateLeft:navigateLeft,navigateRight:navigateRight,gotoCell:gotoCell,getTopPanel:getTopPanel,showTopPanel:showTopPanel,hideTopPanel:hideTopPanel,showHeaderRowColumns:showHeaderRowColumns,hideHeaderRowColumns:hideHeaderRowColumns,getHeaderRow:getHeaderRow,getHeaderRowColumn:getHeaderRowColumn,getGridPosition:getGridPosition,flashCell:flashCell,addCellCssStyles:addCellCssStyles,setCellCssStyles:setCellCssStyles,removeCellCssStyles:removeCellCssStyles,destroy:destroy,getEditorLock:getEditorLock,getEditController:getEditController});init()}}(jQuery));(function(d){d.extend(true,window,{Slick:{Data:{DataView:e,Aggregators:{Avg:c,Min:b,Max:a}}}});function e(){var o=this;var U="id";var C=[];var ad=[];var r={};var B=null;var P=null;var j=null;var I=false;var af=true;var p;var k;var Y;var s;var f;var n;var q=[];var ab={};var W;var G=false;var T=0;var J=0;var S=0;var i=new Slick.Event();var l=new Slick.Event();var h=new Slick.Event();function t(){I=true}function an(ao){I=false;aj(ao)}function ai(){r={};for(var ap=0,ao=C.length;ap<ao;ap++){var aq=C[ap][U];if(aq==undefined||r[aq]!=undefined){throw"Each data element must implement a unique 'id' property"}r[aq]=ap}}function z(){return C}function v(ap,ao){if(ao!==undefined){U=ao}C=ap;ai();aj()}function y(ao){if(ao.pageSize!=undefined){T=ao.pageSize}if(ao.pageNum!=undefined){J=Math.min(ao.pageNum,Math.ceil(S/T))}h.notify(ac(),null,o);aj()}function ac(){return{pageSize:T,pageNum:J,totalRows:S}}function ag(ap,ao){af=ao;k=ap;p=null;if(ao===false){C.reverse()}C.sort(ap);if(ao===false){C.reverse()}ai();aj()}function N(aq,ap){af=ap;p=aq;k=null;var ao=Object.prototype.toString;Object.prototype.toString=(typeof aq=="function")?aq:function(){return this[aq]};if(ap===false){C.reverse()}C.sort();Object.prototype.toString=ao;if(ap===false){C.reverse()}ai();aj()}function am(){if(k){ag(k,af)}else{if(p){N(p,af)}}}function x(ao){P=ao;aj()}function al(ao,ap,aq){Y=ao;s=typeof Y==="function";f=ap;n=aq;ab={};q=[];aj()}function ak(ap,ao){W=ap;G=ao!==undefined?ao:G;aj()}function M(ao){return C[ao]}function R(ao){return r[ao]}function O(aq){if(!B){B={};for(var ap=0,ao=ad.length;ap<ao;++ap){B[ad[ap][U]]=ap}}return B[aq]}function aa(ao){return C[r[ao]]}function V(ap,ao){if(r[ap]===undefined||ap!==ao[U]){throw"Invalid or non-matching id"}C[r[ap]]=ao;if(!j){j={}}j[ap]=true;aj()}function E(ao,ap){C.splice(ao,0,ap);ai();aj()}function ae(ao){C.push(ao);ai();aj()}function m(ao){if(r[ao]===undefined){throw"Invalid id"}C.splice(r[ao],1);ai();aj()}function ah(){return ad.length}function g(ao){return ad[ao]}function F(ao){ab[ao]=true;aj()}function A(ao){delete ab[ao];aj()}function X(){return q}function Z(au){var av;var aw;var ao=[];var at={};var ar;for(var aq=0,ap=au.length;aq<ap;aq++){ar=au[aq];aw=(s)?Y(ar):ar[Y];av=at[aw];if(!av){av=new Slick.Group();av.count=0;av.value=aw;av.rows=[];ao[ao.length]=av;at[aw]=av}av.rows[av.count++]=ar}return ao}function L(au){var at,ao;if(au.collapsed&&!G){return}ao=W.length;while(ao--){W[ao].init()}for(var ap=0,ar=au.rows.length;ap<ar;ap++){at=au.rows[ap];ao=W.length;while(ao--){W[ao].accumulate(at)}}var aq=new Slick.GroupTotals();ao=W.length;while(ao--){W[ao].storeResult(aq)}aq.group=au;au.totals=aq}function D(ap){var ao=ap.length;while(ao--){L(ap[ao])}}function u(ap){var ao=ap.length,aq;while(ao--){aq=ap[ao];aq.collapsed=(aq.value in ab);aq.title=f?f(aq):aq.value}}function K(ap){var aq=[],av=0,ay,az,ax,ao;for(var au=0,ar=ap.length;au<ar;au++){ax=ap[au];aq[av++]=ax;if(!ax.collapsed){for(var at=0,aw=ax.rows.length;at<aw;at++){aq[av++]=ax.rows[at]}}if(ax.totals&&(!ax.collapsed||G)){aq[av++]=ax.totals}}return aq}function H(av,aq){var ar=T*J;var ax=ar+T;var ao=0,ap=0,ay;var au=[];if(aq){for(var at=0,aw=av.length;at<aw;++at){ay=av[at];if(!aq||aq(ay)){if(!T||(ao>=ar&&ao<ax)){au[ap]=ay;ap++}ao++}}}else{au=T?av.slice(ar,ax):av.concat();ao=av.length}return{totalRows:ao,rows:au}}function Q(ax,at){var aw,ao,ap,av=[];for(var aq=0,au=ax.length,ar=at.length;aq<ar;aq++){if(aq>=au){av[av.length]=aq}else{aw=at[aq];ao=ax[aq];if((Y&&(ap=(aw.__nonDataRow)||(ao.__nonDataRow))&&aw.__group!==ao.__group||aw.__updated||aw.__group&&!aw.equals(ao))||(W&&ap&&(aw.__groupTotals||ao.__groupTotals))||aw[U]!=ao[U]||(j&&j[aw[U]])){av[av.length]=aq}}}return av}function w(at,ap,au){B=null;var ao=[];var aq=H(at,au);S=aq.totalRows;ao=aq.rows;q=[];if(Y!=null){q=Z(ao);if(q.length){u(q);if(W){D(q)}q.sort(n);ao=K(q)}}var ar=Q(ap,ao);ad=ao;return ar}function aj(){if(I){return}var ao=ad.length;var ap=S;var aq=w(C,ad,P);if(T&&S<J*T){J=Math.floor(S/T);aq=w(C,ad,P)}j=null;if(ap!=S){h.notify(ac(),null,o)}if(ao!=ad.length){i.notify({previous:ao,current:ad.length},null,o)}if(aq.length>0){l.notify({rows:aq},null,o)}}return{beginUpdate:t,endUpdate:an,setPagingOptions:y,getPagingInfo:ac,getItems:z,setItems:v,setFilter:x,sort:ag,fastSort:N,reSort:am,groupBy:al,setAggregators:ak,collapseGroup:F,expandGroup:A,getGroups:X,getIdxById:R,getRowById:O,getItemById:aa,getItemByIdx:M,refresh:aj,updateItem:V,insertItem:E,addItem:ae,deleteItem:m,getLength:ah,getItem:g,onRowCountChanged:i,onRowsChanged:l,onPagingInfoChanged:h}}function c(i){var h;var f;var g;this.init=function(){h=0;f=0;g=0};this.accumulate=function(j){var k=j[i];h++;if(k!=null&&k!=NaN){f++;g+=1*k}};this.storeResult=function(j){if(!j.avg){j.avg={}}if(f!=0){j.avg[i]=g/f}}}function b(g){var f;this.init=function(){f=null};this.accumulate=function(h){var i=h[g];if(i!=null&&i!=NaN){if(f==null||i<f){f=i}}};this.storeResult=function(h){if(!h.min){h.min={}}h.min[g]=f}}function a(g){var f;this.init=function(){f=null};this.accumulate=function(h){var i=h[g];if(i!=null&&i!=NaN){if(f==null||i>f){f=i}}};this.storeResult=function(h){if(!h.max){h.max={}}h.max[g]=f}}})(jQuery);(function(b){function a(){var l=50;var t={length:0};var k="apple";var d=null;var o=1;var h=null;var c=null;var r=new Slick.Event();var p=new Slick.Event();function s(){}function n(w,v){for(var u=w;u<=v;u++){if(t[u]==undefined||t[u]==null){return false}}return true}function q(){for(var u in t){delete t[u]}t.length=0}function g(z,y){if(c){c.abort();for(var v=c.fromPage;v<=c.toPage;v++){t[v*l]=undefined}}if(z<0){z=0}var x=Math.floor(z/l);var w=Math.floor(y/l);while(t[x*l]!==undefined&&x<w){x++}while(t[w*l]!==undefined&&x<w){w--}if(x>w||((x==w)&&t[x*l]!==undefined)){return}var u="http://services.digg.com/search/stories?query="+k+"&offset="+(x*l)+"&count="+(((w-x)*l)+l)+"&appkey=http://slickgrid.googlecode.com&type=javascript";switch(d){case"diggs":u+=("&sort="+((o>0)?"digg_count-asc":"digg_count-desc"));break}if(h!=null){clearTimeout(h)}h=setTimeout(function(){for(var A=x;A<=w;A++){t[A*l]=null}r.notify({from:z,to:y});c=b.jsonp({url:u,callbackParameter:"callback",cache:true,success:j,error:function(){m(x,w)}});c.fromPage=x;c.toPage=w},50)}function m(v,u){alert("error loading pages "+v+" to "+u)}function j(v){var x=this.fromPage*l,w=x+v.count;t.length=parseInt(v.total);for(var u=0;u<v.stories.length;u++){t[x+u]=v.stories[u];t[x+u].index=x+u}c=null;p.notify({from:x,to:w})}function i(w,v){for(var u=w;u<=v;u++){delete t[u]}g(w,v)}function f(v,u){d=v;o=u;q()}function e(u){k=u;q()}s();return{data:t,clear:q,isDataLoaded:n,ensureData:g,reloadData:i,setSort:f,setSearch:e,onDataLoading:r,onDataLoaded:p}}b.extend(true,window,{Slick:{Data:{RemoteModel:a}}})})(jQuery);(function(b){function a(l,c,m){var o,i;function n(){l.onPagingInfoChanged.subscribe(function(r,q){e(q)});g();e(l.getPagingInfo())}function f(){var s=!Slick.GlobalEditorLock.commitCurrentEdit();var q=l.getPagingInfo();var r=Math.floor(q.totalRows/q.pageSize);return{canGotoFirst:!s&&q.pageSize!=0&&q.pageNum>0,canGotoLast:!s&&q.pageSize!=0&&q.pageNum!=r,canGotoPrev:!s&&q.pageSize!=0&&q.pageNum>0,canGotoNext:!s&&q.pageSize!=0&&q.pageNum<r,pagingInfo:q,lastPage:r}}function d(q){l.setPagingOptions({pageSize:q})}function k(){if(f().canGotoFirst){l.setPagingOptions({pageNum:0})}}function p(){var q=f();if(q.canGotoLast){l.setPagingOptions({pageNum:q.lastPage})}}function h(){var q=f();if(q.canGotoPrev){l.setPagingOptions({pageNum:q.pagingInfo.pageNum-1})}}function j(){var q=f();if(q.canGotoNext){l.setPagingOptions({pageNum:q.pagingInfo.pageNum+1})}}function g(){m.empty();var q=b("<span class='slick-pager-nav' />").appendTo(m);var r=b("<span class='slick-pager-settings' />").appendTo(m);o=b("<span class='slick-pager-status' />").appendTo(m);r.append("<span class='slick-pager-settings-expanded' style='display:none'>Show: <a data=0>All</a><a data='-1'>Auto</a><a data=25>25</a><a data=50>50</a><a data=100>100</a></span>");r.find("a[data]").click(function(w){var v=b(w.target).attr("data");if(v!=undefined){if(v==-1){var u=c.getViewport();d(u.bottom-u.top)}else{d(parseInt(v))}}});var s="<span class='ui-state-default ui-corner-all ui-icon-container'><span class='ui-icon ";var t="' /></span>";b(s+"ui-icon-lightbulb"+t).click(function(){b(".slick-pager-settings-expanded").toggle()}).appendTo(r);b(s+"ui-icon-seek-first"+t).click(k).appendTo(q);b(s+"ui-icon-seek-prev"+t).click(h).appendTo(q);b(s+"ui-icon-seek-next"+t).click(j).appendTo(q);b(s+"ui-icon-seek-end"+t).click(p).appendTo(q);m.find(".ui-icon-container").hover(function(){b(this).toggleClass("ui-state-hover")});m.children().wrapAll("<div class='slick-pager' />")}function e(q){var r=f();m.find(".slick-pager-nav span").removeClass("ui-state-disabled");if(!r.canGotoFirst){m.find(".ui-icon-seek-first").addClass("ui-state-disabled")}if(!r.canGotoLast){m.find(".ui-icon-seek-end").addClass("ui-state-disabled")}if(!r.canGotoNext){m.find(".ui-icon-seek-next").addClass("ui-state-disabled")}if(!r.canGotoPrev){m.find(".ui-icon-seek-prev").addClass("ui-state-disabled")}if(q.pageSize==0){o.text("Showing all "+q.totalRows+" rows")}else{o.text("Showing page "+(q.pageNum+1)+" of "+(Math.floor(q.totalRows/q.pageSize)+1))}}n()}b.extend(true,window,{Slick:{Controls:{Pager:a}}})})(jQuery);(function(b){function a(f,e,c){var g;var h={fadeSpeed:250};function i(){e.onHeaderContextMenu.subscribe(j);c=b.extend({},h,c);g=b("<span class='slick-columnpicker' style='display:none;position:absolute;z-index:20;' />").appendTo(document.body);g.bind("mouseleave",function(k){b(this).fadeOut(c.fadeSpeed)});g.bind("click",d)}function j(m,k){m.preventDefault();g.empty();var o,n;for(var l=0;l<f.length;l++){o=b("<li />").appendTo(g);n=b("<input type='checkbox' />").attr("id","columnpicker_"+l).data("id",f[l].id).appendTo(o);if(e.getColumnIndex(f[l].id)!=null){n.attr("checked","checked")}b("<label for='columnpicker_"+l+"' />").text(f[l].name).appendTo(o)}b("<hr/>").appendTo(g);o=b("<li />").appendTo(g);n=b("<input type='checkbox' id='autoresize' />").appendTo(o);b("<label for='autoresize'>Force Fit Columns</label>").appendTo(o);if(e.getOptions().forceFitColumns){n.attr("checked","checked")}o=b("<li />").appendTo(g);n=b("<input type='checkbox' id='syncresize' />").appendTo(o);b("<label for='syncresize'>Synchronous Resizing</label>").appendTo(o);if(e.getOptions().syncColumnCellResize){n.attr("checked","checked")}g.css("top",m.pageY-10).css("left",m.pageX-10).fadeIn(c.fadeSpeed)}function d(l){if(l.target.id=="autoresize"){if(l.target.checked){e.setOptions({forceFitColumns:true});e.autosizeColumns()}else{e.setOptions({forceFitColumns:false})}return}if(l.target.id=="syncresize"){if(l.target.checked){e.setOptions({syncColumnCellResize:true})}else{e.setOptions({syncColumnCellResize:false})}return}if(b(l.target).is(":checkbox")){if(g.find(":checkbox:checked").length==0){b(l.target).attr("checked","checked");return}var k=[];g.find(":checkbox[id^=columnpicker]").each(function(m,n){if(b(this).is(":checked")){k.push(f[m])}});e.setColumns(k)}}i()}b.extend(true,window,{Slick:{Controls:{ColumnPicker:a}}})})(jQuery);